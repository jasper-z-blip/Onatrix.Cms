@using Umbraco.Cms.Core.Models.Blocks
@using Umbraco.Extensions
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage

@{
    Layout = "Shared/_Layout.cshtml";

    var blocks = Model.Value<BlockListModel>("contentBlocks");

    BlockListItem? heroBlock = null;
    BlockListItem? contentBlock = null;
    BlockListItem? sidebarBlock = null;
    BlockListItem? helpBoxBlock = null;
    BlockListItem? contactFormBlock = null;
    BlockListItem? aboutContactBlock = null;

    if (blocks != null)
    {
        heroBlock = blocks.FirstOrDefault(x => x.Content.ContentType.Alias == "heroBlock");
        contentBlock = blocks.FirstOrDefault(x => x.Content.ContentType.Alias == "rmContentBlock");
        sidebarBlock = blocks.FirstOrDefault(x => x.Content.ContentType.Alias == "sidebarBlock");
        helpBoxBlock = blocks.FirstOrDefault(x => x.Content.ContentType.Alias == "helpBoxBlock");
        contactFormBlock = blocks.FirstOrDefault(x => x.Content.ContentType.Alias == "contactFormBlock");
        aboutContactBlock = blocks.FirstOrDefault(x => x.Content.ContentType.Alias == "aboutContactBlock");
    }
}

@if (heroBlock != null)
{
    @await Html.PartialAsync("Components/heroBlock", heroBlock)
}

<section class="page-container py-12">
    <div class="grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-8">

        <aside class="space-y-6">
            @if (sidebarBlock != null)
            {
                @await Html.PartialAsync("Components/sidebarBlock", sidebarBlock)
            }

            @if (helpBoxBlock != null)
            {
                @await Html.PartialAsync("Components/helpBoxBlock", helpBoxBlock)
            }
        </aside>

        <article class="space-y-8">
            @if (contentBlock != null)
            {
                @await Html.PartialAsync("Components/rmContentBlock", contentBlock)
            }
        </article>
    </div>
</section>

@if (contactFormBlock != null)
{
    <section class="page-container pb-16">
        @await Html.PartialAsync("Components/contactFormBlock", contactFormBlock)
    </section>
}

@if (aboutContactBlock != null)
{
    @await Html.PartialAsync("Partials/Blocks/AboutContactBlock", aboutContactBlock.Content)
}
